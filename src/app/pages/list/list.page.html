<ng-container *transloco="let t">

  <ion-header mode="ios">
  
    <ion-toolbar mode="ios" color="light">
      
      <ion-buttons slot="start" mode="ios">
        <ion-back-button defaultHref="/lists" color="dark" text=""></ion-back-button>
      </ion-buttons>
  
      <ion-title> {{ list?.name }} </ion-title>
  
      <ion-buttons slot="end" mode="ios">
        <ion-button *ngIf="isInEditMode" (click)="onClickSelectGames()" color="dark">
          <ion-icon slot="icon-only" name="close"></ion-icon>
        </ion-button>
        <ion-button id="list-options-button" color="dark">
          <ion-icon slot="icon-only" name="ellipsis-horizontal"></ion-icon>
        </ion-button>
      </ion-buttons>
  
      <ion-popover #optionsPopover trigger="list-options-button" [dismissOnSelect]="true" mode="md">
        <ng-template>
          <ion-content>
            <ion-list>
              <ion-item (click)="onClickChangeListName()">
                <ion-label slot="end"> {{ t('lists.list.changeName') }} </ion-label>
              </ion-item>
              <ion-item (click)="onClickSelectGames()" *ngIf="hasDataToShow">
                <ion-label slot="end" *ngIf="!isInEditMode"> {{ t('lists.list.selectGames') }} </ion-label>
                <ion-label slot="end" *ngIf="isInEditMode"> {{ t('lists.list.stopSelecting') }} </ion-label>
              </ion-item>
              <ion-item (click)="onClickShowModal(deleteListModalOptions)" lines="none">
                <ion-label slot="end" color="danger"> {{ t('lists.list.deleteList') }} </ion-label>
              </ion-item>
            </ion-list>
          </ion-content>
        </ng-template>
      </ion-popover>
      
    </ion-toolbar>
  
  </ion-header>

  <ion-content>
  
    <ion-grid *ngIf="hasDataToShow">
  
      <ion-row>
  
        <ion-col size="12" size-sm="12" size-md="6" size-lg="6" size-xl="4" *ngFor="let game of games">
          
          <app-game-card
            (click)="onClickNavigateToGame(game.id)"
            (press)="onClickSelectGames()"
            [game]="game"
            [isStatusBarVisible]="true">
          </app-game-card>
  
          <div class="checkbox-container" *ngIf="isInEditMode">
            <ion-checkbox #checkbox mode="ios" (ionChange)="updateGamesToDeleteList(checkbox.checked, game)"></ion-checkbox>
            <div class="backdrop" (click)="checkbox.checked = !checkbox.checked"></div>
          </div>
          
        </ion-col>
  
      </ion-row>
  
    </ion-grid>
  
    <app-empty-screen *ngIf="!hasDataToShow"
        [icon]="'game-controller-outline'"
        [title]="t('emptyScreen.listTitle')"
        [description]="t('emptyScreen.listDescription')"
        [buttonLabel]="t('emptyScreen.listButtonLabel')"
        (clickEventEmitter)="onClickNavigateToLibrary()">
    </app-empty-screen>
  
    <ion-fab vertical="bottom" horizontal="end" slot="fixed" *ngIf="gamesToDelete?.length !== 0 && hasDataToShow">
  
      <ion-fab-button color="danger" (click)="onClickShowModal(deleteGamesModalOptions)">
        <ion-icon name="trash-outline"></ion-icon>
      </ion-fab-button>
  
    </ion-fab>
  
    <app-modal #modal></app-modal>
  
  </ion-content>

</ng-container>
